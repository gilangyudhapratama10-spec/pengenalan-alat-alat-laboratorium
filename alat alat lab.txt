<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Media Pembelajaran Interaktif: Pengenalan Alat-Alat Laboratorium Kimia</title>

  <!-- SEO & Aksesibilitas -->
  <meta name="description" content="Modul interaktif pengenalan alat-alat laboratorium kimia: fungsi, cara penggunaan, perawatan, keamanan, dan kuis latihan." />
  <meta name="keywords" content="kimia, laboratorium, alat lab, pembelajaran, interaktif, keselamatan" />
  <meta name="author" content="Gilang Yuda Pratama, S.Pd" />

  <style>
    :root{
      --primary:#2c3e50; --secondary:#3498db; --accent:#e74c3c; --success:#2ecc71; --light:#ecf0f1; --dark:#2c3e50;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;background:#f6f8fb;color:#243342;line-height:1.6}
    a{color:inherit}

    /* Header */
    header{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;padding:1.25rem 1rem;position:sticky;top:0;z-index:50}
    header h1{margin:0;text-align:center;font-weight:700}
    .utility-bar{display:flex;gap:.75rem;justify-content:space-between;align-items:center;flex-wrap:wrap;margin-top:.75rem}
    .search-box{display:flex;flex:1;min-width:260px}
    .search-box input{flex:1;padding:.6rem;border:1px solid #d9dee6;border-right:0;border-radius:8px 0 0 8px}
    .btn{background:var(--secondary);color:#fff;border:0;border-radius:8px;padding:.6rem .9rem;cursor:pointer}
    .btn:hover{filter:brightness(0.95)}
    #bookmarkBtn{background:#f39c12}

    /* Skip link */
    .skip-link{position:absolute;left:1rem;top:-40px;background:#000;color:#fff;padding:8px;border-radius:6px}
    .skip-link:focus{top:1rem}

    /* Layout */
    main.container{max-width:1200px;margin:0 auto;padding:1rem}

    /* Nav */
    nav[role="navigation"]{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);margin:1rem 0}
    .nav-list{display:flex;list-style:none;margin:0;padding:0;flex-wrap:wrap}
    .nav-item{flex:1;min-width:200px}
    .nav-link{display:block;padding:.9rem 1rem;text-decoration:none;text-align:center;color:var(--dark);border-bottom:3px solid transparent}
    .nav-link:hover{background:#f3f7fb;border-bottom-color:var(--secondary)}
    .nav-link.active{background:#eaf4ff;border-bottom-color:var(--secondary);color:var(--secondary)}

    /* Progress */
    .progress-container{margin:1rem 0;background:#fff;padding:1rem;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.06)}
    .progress-bar{height:10px;background:#ecf0f1;border-radius:6px;overflow:hidden}
    .progress-fill{height:100%;background:linear-gradient(90deg,#2ecc71,#3498db);width:0%;transition:width .5s ease}

    /* Cards */
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}
    @media (max-width:1000px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:700px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:480px){.grid{grid-template-columns:1fr}}
    .card{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.06);overflow:hidden;display:flex;flex-direction:column}
    .card .thumb{aspect-ratio:16/10;display:flex;align-items:center;justify-content:center;font-size:46px}
    .card h4{margin:.75rem 1rem .25rem;color:var(--primary)}
    .card p{margin:0 1rem 1rem;color:#4b5b6a;font-size:.95rem}
    .card .card-actions{margin:.25rem 1rem 1rem}

    .content-section{display:none;background:#fff;border-radius:12px;padding:1.25rem;box-shadow:0 2px 8px rgba(0,0,0,.06);margin:1rem 0}
    .content-section.active{display:block;animation:fadeIn .4s ease}
    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

    .badge{display:inline-block;padding:.25rem .5rem;border-radius:999px;font-size:.75rem;background:#eef3f9;color:#3c4d63;margin-right:.25rem}
    .note{background:#f8fafc;border-left:4px solid var(--secondary);padding:1rem;border-radius:0 12px 12px 0;margin:1rem 0}
    .highlight{background:yellow}

    /* Modal */
    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:1000}
    .modal-content{background:#fff;width:min(900px,92%);margin:5% auto;border-radius:14px;padding:1.25rem;max-height:80vh;overflow:auto}
    .modal .close{float:right;font-size:28px;cursor:pointer;color:#999}

    /* DnD Area */
    .dnd{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
    .dropzone{min-height:120px;background:#f2f6fb;border:2px dashed #c9d6e6;border-radius:12px;padding:1rem}
    .draggable{display:inline-block;background:#fff;border:1px solid #dde6f2;border-radius:999px;padding:.45rem .7rem;margin:.25rem;cursor:grab}

    footer{margin:2rem 0 3rem;color:#738398;text-align:center}
  </style>
</head>
<body>
  <a href="#main" class="skip-link">Langsung ke konten utama</a>
  <header>
    <h1>Pengenalan Alat-Alat Laboratorium Kimia</h1>
    <div class="utility-bar">
      <div class="search-box" role="search">
        <input id="searchInput" type="text" placeholder="Cari alat, fungsi, atau keselamatan..." aria-label="Pencarian" />
        <button class="btn" onclick="searchContent()" aria-label="Cari">Cari</button>
      </div>
      <button class="btn" id="bookmarkBtn" onclick="toggleBookmark()" aria-label="Bookmark">‚≠ê Bookmark</button>
    </div>
  </header>

  <main id="main" class="container">
    <nav role="navigation" aria-label="Menu utama">
      <ul class="nav-list">
        <li class="nav-item"><a href="#" class="nav-link active" data-target="intro">Pendahuluan</a></li>
        <li class="nav-item"><a href="#" class="nav-link" data-target="galeri">Galeri Alat</a></li>
        <li class="nav-item"><a href="#" class="nav-link" data-target="keselamatan">Keselamatan</a></li>
        <li class="nav-item"><a href="#" class="nav-link" data-target="latihan">Latihan DnD</a></li>
        <li class="nav-item"><a href="#" class="nav-link" data-target="kuis">Kuis</a></li>
        <li class="nav-item"><a href="#" class="nav-link" data-target="biodata">Biodata Guru</a></li>
      </ul>
    </nav>

    <div class="progress-container" aria-live="polite">
      <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
      <p>Progress Belajar: <span id="progressText">0%</span></p>
    </div>

    <!-- Pengenalan -->
    <section id="intro" class="content-section active">
      <h2>Tujuan Pembelajaran</h2>
      <p>Setelah mempelajari modul ini, peserta didik mampu:</p>
      <ul>
        <li>Mengenali nama, fungsi, dan simbol dari alat-alat laboratorium kimia umum.</li>
        <li>Memahami cara penggunaan dasar dan perawatan alat.</li>
        <li>Menerapkan prinsip <em>Keselamatan & Kesehatan Kerja (K3)</em> di laboratorium.</li>
      </ul>
      <div class="note" role="note">
        <strong>Tip:</strong> Klik kartu alat untuk membuka detail (fungsi, cara pakai, perawatan, ikon bahaya terkait).
      </div>
    </section>

    <!-- Galeri Alat -->
    <section id="galeri" class="content-section" aria-label="Galeri alat laboratorium">
      <h2>Galeri Alat</h2>
      <div class="grid" id="alatGrid" aria-live="polite"></div>
    </section>

    <!-- Keselamatan -->
    <section id="keselamatan" class="content-section">
      <h2>Keselamatan & K3 Laboratorium</h2>
      <div class="grid" style="grid-template-columns:repeat(3,1fr)">
        <div class="card"><div class="thumb">üß§</div><h4>APD Dasar</h4><p>Jas lab, kacamata keselamatan, sarung tangan, sepatu tertutup.</p></div>
        <div class="card"><div class="thumb">üö´</div><h4>Larangan Umum</h4><p>Tidak makan/minum, tidak bercanda berlebihan, rambut diikat.</p></div>
        <div class="card"><div class="thumb">üßØ</div><h4>Keadaan Darurat</h4><p>Kenali lokasi APAR, shower darurat, eyewash, kotak P3K.</p></div>
      </div>
      <div class="note"><strong>Ingat:</strong> Baca MSDS sebelum menggunakan bahan kimia baru. Ikuti instruksi guru/laboran.</div>
    </section>

    <!-- Latihan Drag & Drop -->
    <section id="latihan" class="content-section">
      <h2>Latihan: Cocokkan Nama dengan Alat (Drag & Drop)</h2>
      <p>Tarik nama alat ke kotak yang sesuai.</p>
      <div class="dnd">
        <div>
          <h3>Nama Alat</h3>
          <div id="names"></div>
        </div>
        <div>
          <h3>Target Gambar</h3>
          <div id="targets" class="grid" style="grid-template-columns:1fr 1fr"></div>
        </div>
      </div>
      <div class="card-actions"><button class="btn" onclick="cekDnD()">Periksa</button> <span id="dndHasil" class="badge" aria-live="polite"></span></div>
    </section>

    <!-- Kuis -->
    <section id="kuis" class="content-section">
      <h2>Kuis Pilihan Ganda</h2>
      <div id="quizContainer"></div>
      <div class="card-actions"><button class="btn" onclick="checkQuiz()">Kumpulkan Jawaban</button> <span id="quizScore" class="badge" aria-live="polite"></span></div>
    </section>

    <!-- Biodata -->
    <section id="biodata" class="content-section">
      <h2>Biodata Guru</h2>
      <div class="card" style="flex-direction:row;gap:1rem;align-items:center;padding:1rem">
        <div class="thumb" style="width:120px;height:120px;border-radius:50%;background:#eaf4ff;font-size:36px">üë©‚Äçüè´</div>
        <div>
          <h3>Gilang Yuda Pratama, S.Pd</h3>
          <p><strong>Mata Pelajaran:</strong> Kimia ‚Ä¢ <strong>Sekolah:</strong> SMAN 10 Kabupaten Tangerang</p>
          <p><em>"Keselamatan dulu, eksperimen kemudian."</em></p>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal Detail Alat -->
  <div id="alatModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="alatTitle">
    <div class="modal-content">
      <span class="close" onclick="tutupModal()" aria-label="Tutup">&times;</span>
      <h2 id="alatTitle"></h2>
      <p id="alatFungsi"></p>
      <div id="alatInfo" class="note"></div>
      <p id="alatPerawatan"></p>
      <div id="alatBahaya"></div>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 ‚Ä¢ Media Pembelajaran Interaktif Alat Lab Kimia</p>
  </footer>

  <button class="btn" style="position:fixed;bottom:20px;right:20px;z-index:999" onclick="bukaKuisAkhir()">üß™ Kuis Akhir</button>

  <!-- Modal Kuis Akhir -->
  <div id="quizModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="quizTitle">
    <div class="modal-content">
      <span class="close" onclick="tutupKuisAkhir()" aria-label="Tutup">&times;</span>
      <h2 id="quizTitle">Kuis Akhir Perlengkapan Lab</h2>
      <div id="comprehensiveQuiz"></div>
      <div class="card-actions"><button class="btn" onclick="checkComprehensiveQuiz()">Kumpulkan</button> <span id="quizAkhirScore" class="badge"></span></div>
    </div>
  </div>

  <script>
    // ======= Data Alat =======
    const ALAT = [
      {id:'beaker', nama:'Gelas Kimia (Beaker)', emoji:'ü•õ', fungsi:'Menampung, mengaduk, memanaskan larutan dalam jumlah sedang.', penggunaan:'Jangan digunakan untuk pengukuran volume presisi.', perawatan:'Bilas segera setelah dipakai, hindari perubahan suhu mendadak.', bahaya:['üî• Panas','üß™ Percikan']},
      {id:'erlen', nama:'Labu Erlenmeyer', emoji:'üî∫', fungsi:'Pencampuran larutan, titrasi (dengan buret).', penggunaan:'Cocok untuk diaduk berputar, kurangi tumpahan.', perawatan:'Cuci leher dan dasar dengan sikat botol.', bahaya:['üß™ Asam/Basa','üí• Tekanan uap']},
      {id:'buret', nama:'Buret', emoji:'üßµ', fungsi:'Pengeluaran volume cairan sangat presisi (titrasi).', penggunaan:'Hilangkan gelembung di ujung; catat volume awal/akhir.', perawatan:'Cuci dengan air suling; simpan vertikal.', bahaya:['üß™ Reagen','üìè Presisi']},
      {id:'pipvol', nama:'Pipet Volumetrik', emoji:'üß™', fungsi:'Mengambil volume tetap dengan presisi.', penggunaan:'Gunakan propipet, jangan dengan mulut.', perawatan:'Bilas dengan larutan yang sama (conditioning).', bahaya:['‚ö†Ô∏è Kontaminasi']},
      {id:'pipet', nama:'Pipet Tetes', emoji:'üíß', fungsi:'Menambahkan tetesan cairan.', penggunaan:'Tidak untuk pengukuran presisi.', perawatan:'Bersihkan ujung; hindari kontaminasi silang.', bahaya:['üßº Kebersihan']},
      {id:'labuukur', nama:'Labu Ukur', emoji:'‚öóÔ∏è', fungsi:'Menyiapkan larutan standar pada volume tepat.', penggunaan:'Isi sampai garis kalibrasi (meniskus).', perawatan:'Jangan dipanaskan, simpan tutupnya.', bahaya:['üìè Presisi']},
      {id:'meas', nama:'Gelas Ukur', emoji:'ü•§', fungsi:'Mengukur volume dengan ketelitian sedang.', penggunaan:'Baca meniskus sejajar mata.', perawatan:'Keringkan sebelum simpan.', bahaya:['üìè Ketelitian']},
      {id:'statif', nama:'Statif & Klem', emoji:'üß±', fungsi:'Menahan peralatan (buret, kondensor).', penggunaan:'Kencangkan secukupnya; cek stabilitas.', perawatan:'Keringkan dari korosi.', bahaya:['üß≤ Jatuh/terjepit']},
      {id:'thermo', nama:'Termometer', emoji:'üå°Ô∏è', fungsi:'Mengukur suhu.', penggunaan:'Jangan menyentuh dasar bejana saat pengukuran.', perawatan:'Simpan dalam tabung pelindung.', bahaya:['‚ùÑÔ∏è/üî• Ekstrem']},
      {id:'bunsen', nama:'Pembakar Bunsen', emoji:'üî•', fungsi:'Pemanasan nyala terbuka.', penggunaan:'Atur udara untuk nyala biru; jauhkan bahan mudah terbakar.', perawatan:'Periksa kebocoran selang gas.', bahaya:['üî• Terbakar','üí® Gas']},
      {id:'balance', nama:'Neraca Analitik', emoji:'‚öñÔ∏è', fungsi:'Menimbang massa presisi.', penggunaan:'Gunakan boat/kertas timbang; tutup pintu saat menimbang.', perawatan:'Kalibrasi berkala.', bahaya:['üìè Presisi','‚ö° Listrik']},
      {id:'spatula', nama:'Spatula', emoji:'ü•Ñ', fungsi:'Memindahkan padatan.', penggunaan:'Gunakan bersih dan kering.', perawatan:'Lap kering setelah pakai.', bahaya:['üßº Kebersihan']},
      {id:'mortir', nama:'Mortir & Alu', emoji:'ü™®', fungsi:'Menggerus padatan.', penggunaan:'Gerus bertahap; hindari material terlalu keras.', perawatan:'Bersihkan residu segera.', bahaya:['üß± Debu']},
      {id:'corong', nama:'Corong Kaca', emoji:'üîª', fungsi:'Membantu penuangan/filtrasi.', penggunaan:'Gunakan kertas saring sesuai ukuran.', perawatan:'Hati-hati tepi tajam.', bahaya:['üß™ Percikan']},
      {id:'corpisah', nama:'Corong Pisah', emoji:'üçê', fungsi:'Ekstraksi cair-cair.', penggunaan:'Lepas penutup saat membuka keran; buang tekanan.', perawatan:'Lumasi keran jika perlu.', bahaya:['üí• Tekanan','üõ¢Ô∏è Pelarut']},
      {id:'penjepit', nama:'Penjepit Tabung Reaksi', emoji:'üß∑', fungsi:'Memegang tabung saat pemanasan.', penggunaan:'Jepit pada bagian atas, miringkan tabung.', perawatan:'Pastikan pegas kuat.', bahaya:['üî• Panas']},
      {id:'watch', nama:'Kaca Arloji', emoji:'üçΩÔ∏è', fungsi:'Menutup bejana, menguapkan sedikit larutan.', penggunaan:'Jangan paparkan panas berlebih.', perawatan:'Cuci & keringkan.', bahaya:['üß™ Percikan']},
      {id:'filterpaper', nama:'Kertas Saring', emoji:'üßª', fungsi:'Filtrasi.', penggunaan:'Lipat kerucut; basahi sebelum filtrasi.', perawatan:'Simpan kering.', bahaya:['üßº Kebersihan']},
      {id:'phmeter', nama:'pH Meter', emoji:'üîå', fungsi:'Mengukur pH presisi.', penggunaan:'Kalibrasi 2‚Äì3 buffer; bilas elektroda.', perawatan:'Simpan elektroda dalam larutan penyimpanan.', bahaya:['‚ö° Listrik','üìè Presisi']},
      {id:'hotplate', nama:'Hot Plate & Stirrer', emoji:'üç≥', fungsi:'Pemanasan & pengadukan magnetik.', penggunaan:'Gunakan batang pengaduk; hati-hati permukaan panas.', perawatan:'Matikan & dinginkan sebelum simpan.', bahaya:['üî• Panas','‚ö° Listrik']},
      {id:'desikator', nama:'Desikator', emoji:'ü´ô', fungsi:'Menyimpan sampel kering.', penggunaan:'Gunakan grease tipis pada penutup.', perawatan:'Ganti desikan bila jenuh.', bahaya:['üí• Vakum ringan']},
      {id:'micropipet', nama:'Mikropipet', emoji:'üìè', fungsi:'Mengambil volume mikro.' , penggunaan:'Gunakan tip; hindari melebihi rentang.', perawatan:'Kalibrasi & bersihkan secara berkala.', bahaya:['üìè Presisi']}
    ];

    // ======= Galeri Render =======
    function renderGaleri(){
      const grid = document.getElementById('alatGrid');
      grid.innerHTML = '';
      ALAT.forEach(a=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.tabIndex = 0;
        card.setAttribute('role','button');
        card.setAttribute('aria-label', a.nama);
        card.innerHTML = `
          <div class="thumb" aria-hidden="true">${a.emoji}</div>
          <h4>${a.nama}</h4>
          <p>${a.fungsi}</p>
          <div class="card-actions">
            <button class="btn" onclick="bukaDetail('${a.id}')">Detail</button>
          </div>`;
        grid.appendChild(card);
      });
    }

    // ======= Modal Detail =======
    function bukaDetail(id){
      const a = ALAT.find(x=>x.id===id);
      if(!a) return;
      document.getElementById('alatTitle').textContent = a.nama + ' ' + a.emoji;
      document.getElementById('alatFungsi').textContent = 'Fungsi: ' + a.fungsi;
      document.getElementById('alatInfo').textContent = 'Cara penggunaan: ' + a.penggunaan;
      document.getElementById('alatPerawatan').textContent = 'Perawatan: ' + a.perawatan;
      document.getElementById('alatBahaya').innerHTML = a.bahaya.map(b=>`<span class="badge">${b}</span>`).join(' ');
      document.getElementById('alatModal').style.display='block';
      // tandai kunjungan
      localStorage.setItem('visited_'+id,'true');
      updateProgress();
    }
    function tutupModal(){ document.getElementById('alatModal').style.display='none'; }

    // ======= Navigasi dengan state =======
    document.querySelectorAll('.nav-link').forEach(link=>{
      link.addEventListener('click',e=>{
        e.preventDefault();
        document.querySelectorAll('.nav-link').forEach(l=>l.classList.remove('active'));
        document.querySelectorAll('.content-section').forEach(s=>s.classList.remove('active'));
        link.classList.add('active');
        const id = link.getAttribute('data-target');
        document.getElementById(id).classList.add('active');
        sessionStorage.setItem('activeSection', id);
        window.scrollTo({top:0,behavior:'smooth'});
      });
    });
    document.addEventListener('DOMContentLoaded',()=>{
      const saved = sessionStorage.getItem('activeSection');
      if(saved && document.getElementById(saved)){
        document.querySelectorAll('.nav-link').forEach(l=>l.classList.remove('active'));
        document.querySelectorAll('.content-section').forEach(s=>s.classList.remove('active'));
        document.querySelector(`.nav-link[data-target="${saved}"]`)?.classList.add('active');
        document.getElementById(saved).classList.add('active');
      }
    });

    // ======= Progress =======
    function updateProgress(){
      // target: kunjungi minimal 10 alat + selesaikan 2 kuis (DnD & PG)
      const alatVisited = ALAT.filter(a=>localStorage.getItem('visited_'+a.id)==='true').length;
      const quiz1 = localStorage.getItem('dnd_score') ? 1 : 0;
      const quiz2 = localStorage.getItem('quiz_score') ? 1 : 0;
      const max = 12; // 10 alat + 2 kuis
      const progress = Math.min(100, Math.round(((Math.min(alatVisited,10) + quiz1 + quiz2) / max) * 100));
      document.getElementById('progressFill').style.width = progress + '%';
      document.getElementById('progressText').textContent = progress + '%';
      localStorage.setItem('learningProgress', progress);
    }

    // ======= Pencarian & Highlight =======
    function searchContent(){
      const term = document.getElementById('searchInput').value.trim().toLowerCase();
      if(!term) return;
      // buka galeri dulu
      document.querySelector('.nav-link.active')?.classList.remove('active');
      document.querySelector('.content-section.active')?.classList.remove('active');
      document.querySelector('.nav-link[data-target="galeri"]').classList.add('active');
      document.getElementById('galeri').classList.add('active');
      // highlight nama yang cocok
      const grid = document.getElementById('alatGrid');
      [...grid.querySelectorAll('h4, p')].forEach(n=>n.innerHTML=n.textContent); // reset
      let found=false;
      ALAT.forEach((a,i)=>{
        const card = grid.children[i];
        const text = (a.nama+' '+a.fungsi+' '+a.penggunaan).toLowerCase();
        if(text.includes(term)){
          const h4 = card.querySelector('h4');
          h4.innerHTML = h4.textContent.replace(new RegExp('('+term+')','gi'),'<span class="highlight">$1</span>');
          found=true;
        }
      });
      if(!found) alert('Tidak ditemukan. Coba kata kunci lain.');
    }

    // ======= Bookmark section aktif =======
    function toggleBookmark(){
      const active = document.querySelector('.content-section.active')?.id;
      if(!active) return;
      const marks = JSON.parse(localStorage.getItem('bookmarks')||'[]');
      const idx = marks.indexOf(active);
      const btn = document.getElementById('bookmarkBtn');
      if(idx===-1){ marks.push(active); btn.textContent='‚úÖ Bookmarked'; setTimeout(()=>btn.textContent='‚≠ê Bookmark',1500); }
      else{ marks.splice(idx,1); btn.textContent='‚ùå Removed'; setTimeout(()=>btn.textContent='‚≠ê Bookmark',1500); }
      localStorage.setItem('bookmarks', JSON.stringify(marks));
    }
    const obs = new MutationObserver(()=>{
      const active = document.querySelector('.content-section.active')?.id;
      const marks = JSON.parse(localStorage.getItem('bookmarks')||'[]');
      document.getElementById('bookmarkBtn').textContent = marks.includes(active)?'‚úÖ Bookmarked':'‚≠ê Bookmark';
    });
    obs.observe(document.body,{childList:true,subtree:true,attributes:true,attributeFilter:['class']});

    // ======= Drag & Drop =======
    const DND_SAMPLES = [
      {id:'buret', label:'Buret'},
      {id:'pipvol', label:'Pipet Volumetrik'},
      {id:'labuukur', label:'Labu Ukur'},
      {id:'bunsen', label:'Bunsen'}
    ];
    function renderDnD(){
      const names = document.getElementById('names');
      const targets = document.getElementById('targets');
      names.innerHTML=''; targets.innerHTML='';
      // nama
      DND_SAMPLES.forEach(x=>{
        const tag=document.createElement('span');
        tag.textContent=x.label; tag.className='draggable'; tag.draggable=true; tag.id='drag_'+x.id;
        tag.addEventListener('dragstart',ev=>{ev.dataTransfer.setData('text/plain',x.id)});
        names.appendChild(tag);
      });
      // target
      DND_SAMPLES.forEach(x=>{
        const card=document.createElement('div'); card.className='dropzone'; card.id='drop_'+x.id;
        const alat=ALAT.find(a=>a.id===x.id);
        card.innerHTML=`<div class="thumb" style="font-size:40px">${alat.emoji}</div><strong>${alat.nama}</strong><div class="badge" id="badge_${x.id}">Taruh di sini</div>`;
        card.addEventListener('dragover',ev=>ev.preventDefault());
        card.addEventListener('drop',ev=>{ev.preventDefault();const id=ev.dataTransfer.getData('text/plain');card.dataset.value=id;document.getElementById('badge_'+x.id).textContent='Dijatuhkan: '+(DND_SAMPLES.find(s=>s.id===id)?.label||'-');});
        targets.appendChild(card);
      });
    }
    function cekDnD(){
      let benar=0; DND_SAMPLES.forEach(x=>{ const drop=document.getElementById('drop_'+x.id); if(drop?.dataset.value===x.id) benar++; });
      const score = Math.round(100*benar/DND_SAMPLES.length);
      document.getElementById('dndHasil').textContent = `Nilai DnD: ${score}%`;
      localStorage.setItem('dnd_score', score);
      updateProgress();
    }

    // ======= Kuis Pilihan Ganda =======
    const QUIZ = [
      {q:'Alat yang paling tepat untuk menyiapkan larutan standar 250 mL adalah...', opts:['Gelas ukur','Labu ukur','Beaker','Erlenmeyer'], a:1},
      {q:'Untuk mengukur volume 25,00 mL dengan presisi tinggi digunakan...', opts:['Pipet tetes','Pipet volumetrik','Gelas ukur 50 mL','Beaker 50 mL'], a:1},
      {q:'Saat menggunakan buret, langkah penting sebelum titrasi adalah...', opts:['Menggosok dengan pasir','Mengisi sampai penuh','Menghilangkan gelembung di ujung','Mengocok kuat'], a:2},
      {q:'Alat yang menggunakan nyala terbuka dan perlu ventilasi baik adalah...', opts:['Hot plate','Bunsen','Desikator','Mikropipet'], a:1},
      {q:'Elektroda pH meter sebaiknya disimpan dalam...', opts:['Air suling','Larutan penyimpanan khusus','Keringkan saja','Alkohol'], a:1}
    ];
    function renderQuiz(){
      const box=document.getElementById('quizContainer');
      box.innerHTML='';
      QUIZ.forEach((it,idx)=>{
        const q=document.createElement('div'); q.className='card';
        q.innerHTML=`<div style="padding:1rem"><p><strong>${idx+1}. ${it.q}</strong></p>
          ${it.opts.map((o,i)=>`<label style='display:block;margin:.35rem 0'><input type='radio' name='q${idx}' value='${i}'> ${o}</label>`).join('')}
        <div id='res${idx}' class='badge'></div></div>`;
        box.appendChild(q);
      });
    }
    function checkQuiz(){
      let benar=0; QUIZ.forEach((it,idx)=>{ const sel=document.querySelector(`input[name="q${idx}"]:checked`); const res=document.getElementById('res'+idx); if(!sel){res.textContent='Belum dijawab'; return;} if(parseInt(sel.value)===it.a){benar++; res.textContent='Benar'; res.style.background='#e9f9ef';} else {res.textContent='Salah'; res.style.background='#fdecea';} });
      const score=Math.round(100*benar/QUIZ.length);
      document.getElementById('quizScore').textContent=`Nilai Kuis: ${score}%`;
      localStorage.setItem('quiz_score', score);
      updateProgress();
    }

    // ======= Kuis Akhir (Modal) =======
    const FINAL = [
      {q:'Simbol APD yang selalu dipakai saat pemanasan?', opts:['Sarung tangan & kacamata','Sandal','Topi pesta','Masker kain saja'], a:0},
      {q:'Langkah aman sebelum membuka keran corong pisah adalah...', opts:['Kocok kuat dengan tutup rapat','Arahkan ke teman','Lepas penutup untuk membuang tekanan','Panaskan dulu'], a:2}
    ];
    function bukaKuisAkhir(){document.getElementById('quizModal').style.display='block'; renderFinal();}
    function tutupKuisAkhir(){document.getElementById('quizModal').style.display='none';}
    function renderFinal(){
      const box=document.getElementById('comprehensiveQuiz');
      box.innerHTML='';
      FINAL.forEach((it,idx)=>{
        const wrap=document.createElement('div'); wrap.className='card';
        wrap.innerHTML=`<div style="padding:1rem"><p><strong>${idx+1}. ${it.q}</strong></p>
          ${it.opts.map((o,i)=>`<label style='display:block;margin:.35rem 0'><input type='radio' name='f${idx}' value='${i}'> ${o}</label>`).join('')}</div>`;
        box.appendChild(wrap);
      });
    }
    function checkComprehensiveQuiz(){
      let benar=0; FINAL.forEach((it,idx)=>{ const sel=document.querySelector(`input[name="f${idx}"]:checked`); if(sel && parseInt(sel.value)===it.a) benar++; });
      const score=Math.round(100*benar/FINAL.length);
      document.getElementById('quizAkhirScore').textContent = `Skor Akhir: ${score}%`;
      localStorage.setItem('final_score', score);
updateProgress();
}


// ======= Init =======
function init(){ renderGaleri(); renderDnD(); renderQuiz(); updateProgress(); }
window.addEventListener('load', init);
window.addEventListener('click', e=>{ if(e.target.id==='alatModal'||e.target.id==='quizModal') e.target.style.display='none'; });
</script>
</body>
</html>